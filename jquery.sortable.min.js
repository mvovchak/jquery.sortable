(function(d,u,v){function h(a,b){this.element=d(a);this.settings=d.extend({},m,b||{});this._name=k;this.isHandle=this.isTable=!1;this.placeholder=null;this.itemIndex=0;this.items=d();this.init()}function n(){var a=this.items,b=this.placeholder;e(f.mousedown,a.find(this.settings.handle),this,function(){this.isHandle=!0});e(f.mouseup,a,this,function(){this.isHandle=!1});e(f.dragend,a,this,p);e(f.selectstart,a.not("a[href],img"),this,q);e(f.dragstart,[a,b],this,r);e(f.drop,[a,b],this,s);e(f.dragover,
[a,b],this,t)}function r(a,b){if(this.settings.handle&&!this.isHandle)return!1;l(a,!0);c=b.addClass(this.settings.dragging);this.isHandle=!1;this.itemIndex=c.index()}function p(a,b){if(!c)return!1;c.removeClass(this.settings.dragging);c.show();this.placeholder.detach();this.itemIndex!=c.index()&&this.element.trigger(f.sortupdate,{item:c});c=d()}function s(a,b){a.stopPropagation();this.placeholder.after(c);c.trigger(f.dragend);return!1}function t(a,b){if(!this.items.is(c))return!0;a.preventDefault();
l(a);c.hide();if(this.items.is(b[0]))b[this.itemIndex<this.placeholder.index()?"after":"before"](this.placeholder);return!1}function q(a,b){return b.dragDrop?b.dragDrop():!1}function e(a,b,c,f){var e=0,g=function(b){b.on(a,function(a){f.call(c,a,d(this))})};if(d.isArray(b))for(e=b.length;e--;)g(b[e]);else g(b)}function l(a,b){var c=a.originalEvent.dataTransfer;b?(c.effectAllowed="move",c.setData("text","dummyText")):c.dropEffect="move"}var k="sortable",g="plugin_"+k,c=null,m={placeholder:"sortable-placeholder",
dragging:"sortable-dragging",dropped:"sortable-dropped",handle:null},f={mousedown:"mousedown.sortable",mouseup:"mouseup.sortable",dragstart:"dragstart.sortable",dragend:"dragend.sortable",selectstart:"selectstart.sortable",drop:"drop.sortable",dragover:"dragover.sortable dragenter.sortable",sortupdate:"sortupdate.sortable"};h.prototype.init=function(){var a=this.element.prop("tagName").toLowerCase(),b;"table"===a?(a="tr",b=d("<td />",{colspan:this.element.find("tr:first td,th").length,"class":this.settings.placeholder}),
this.isTable=!0):a=/^ul|ol$/i.test(a)?"li":"div";this.placeholder=d("<"+a+" />").addClass(this.settings.placeholder).append(b);this.items=this.isTable?this.element.find("tbody > tr"):this.element.children();this.items.prop("draggable",!0);n.call(this)};h.prototype.destroy=function(){this.placeholder.remove();c=this.placeholder=null;this.element.off(".sortable");this.items.off(".sortable");this.element.removeData(g)};d.fn[k]=function(a){this.each(function(){d.data(this,g)||"destroy"==a?"destroy"===
a&&d.data(this,g).destroy():d.data(this,g,new h(this,a))});return this}})(jQuery,window,document);